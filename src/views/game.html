<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Shit Type</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">

    <script src="/socket.io/client-dist/socket.io.js"></script>
</head>
<body class='h-100 text-center text-white bg-dark'>
  
    <div class="cover-container d-flex w-100 h-100 p-3 mx-auto flex-column mw-70" style='max-width:60%;'>
        <header class="mb-auto">
          <div>
            <h3 class="float-md-start mb-0">Cover</h3>
            <nav class="nav nav-masthead justify-content-center float-md-end">
              <a class="nav-link active" aria-current="page" href="#">Home</a>
              <a class="nav-link" href="#">Features</a>
              <a class="nav-link" href="#">Contact</a>
            </nav>
          </div>
        </header>

        <main class="px-3" style='padding-top:10%;'>
          
          <h1>Snake Type Shit.</h1>
          <p></p>
          <canvas id="myScreen" width='500' height='500' ></canvas>  
        </main>

        <footer class="mt-auto text-white-50">
          <p> Snake </p>
        </footer>
      </div>      

      <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js" integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js" integrity="sha384-j0CNLUeiqtyaRmlzUHCPZ+Gy5fQu0dQ6eZ/xAww941Ai1SxSY+0EQqNXNE6DZiVc" crossorigin="anonymous"></script>
      
</body>
<style>
  footer{
    bottom: 0;
    left: 0;
    position: fixed;
    width:100%;
  }

  #myScreen{
    border:5px solid #3385ff;
  }

</style>

<script>
  var socket = io();
  var width = 500;
  var height = 500;
  var screen = document.getElementById("myScreen").getContext('2d');
  screen.fillStyle = " #f0f0f5";
  screen.fillRect(0, 0, width, height);
  
  var game = {
    players:{
      'player1': {x:20,y:20},
      'player2': {x:50,y:20},
    },
    fruits:{
      'fruit1':{x:450,y:450}
    }
  }
  var currentPlayer = game.players['player1'];
  renderScreen();

  function renderScreen(){
    screen.fillStyle = " #f0f0f5";
    screen.fillRect(0, 0, 500, 500);

    for(player in game.players){
      var players = game.players[player];
      screen.fillStyle = '#ff9999'
      screen.fillRect(players.x,players.y,20,20);
    }
    for(fruit in game.fruits){
      var fruits = game.fruits[fruit];
      screen.fillStyle = '#99ff99'
      screen.fillRect(fruits.x,fruits.y,20,20);
    }
    
    requestAnimationFrame(renderScreen);
  }

  document.addEventListener('keydown',handleKeyDown);

  function handleKeyDown(event){
    var speed = 10;
    if(event.key == 'ArrowUp' && currentPlayer.y - speed > 0){
      currentPlayer.y -=speed;
      io.on('test', () => {
        
      })
      return
    }
    if(event.key == 'ArrowDown' && currentPlayer.y + speed < height - 20){
      currentPlayer.y +=speed;
      return
    }
    if(event.key == 'ArrowRight' && currentPlayer.x + speed < width - 20 ){
      currentPlayer.x +=speed;
      return
    }
    if(event.key == 'ArrowLeft' && currentPlayer.x - speed > 0){
      currentPlayer.x -=speed;
      return
    }
  } 
  

</script>

</html>